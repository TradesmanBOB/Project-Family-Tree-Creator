<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Family Tree Creator</title>
    <link rel="stylesheet" href="CSS/styles.css" />
    <!-- Links for necessary libraries for converting HTML to an image -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- ADDED: This is the D3.js library, which is essential for drawing the tree -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<!-- Body Starts now! -->
<body class="familytrees-page">
    <!-- Site Header -->
     <header>
        <div class="container">
            <h1 class="familytree">
                <a href="index.html" class="h1-a">A Family Tree Creator</a>
            </h1>
            <nav>
                <ul>
                    <li class="homeanchor"><a href="index.html">Home</a></li>
                    <li class="treeanchor"><a href="familytrees.html">Create a Family Tree</a></li>
                    <li class="aboutanchor"><a href="about.html">About</a></li>
                    <li class="download-img-nav">
                        <button id="download-img-btn-nav" class="download-btn" aria-label="Download family tree image">
                            Download as Image
                        </button>
                    </li>
                    <li class="personaltreeanchor"><a href="personaltree.html">My Personal Tree</a></li>
                </ul>
            </nav>
        </div>
     </header>

    <!-- Main content -->
    <main>
        <div class="container-familytree">
            <h2>Prepare, to grow a tree upwards!</h2>
            <div class="p-familytree">
                <p class="span-p">
                    The below section is where your family tree will appear once you start adding family members.     
                </p>
                <ol class="familytree-list">
                    <li>(1) Use the controls on the left to begin building your tree.</li>
                    <li>(2) Start with the oldest known ancestor as the root member.</li>
                    <li>(3) Select the relationship type for each member you add.</li>
                    <li>(4) Finally, click "Download as Image" to save your family tree as an image file, when complete.</li>
                </ol>
                <p>
                    <span class="span-p">
                        Get started by adding your first family member! First family member must be added as a "root" member or oldest known ancestor.
                    </span>
                </p>
                <p class="lower-p">
                    <span class="span-p">
                        As you add parents, children, siblings, spouses and other relatives, the tree will automatically update and display here in a clear, visual format.
                    </span>
                </p>
            </div>
        </div>
        <hr class="section-divider"/>
        <div class="canvas-creator-container">
            <div id="member-creator">
                <h3 class="h3-form">Add a Family Member</h3>
                <button type="button" id="download-img-btn-page" class="download-btn" aria-label="Download family tree image">
                    Download as Image
                </button>
                <form id="add-member-form">
                    <!-- Name of family member -->
                    <div class="name-div">
                        <label for="member-name">Name:</label>
                        <p class="instructions">Enter name of family member, if first (make oldest member, like great-grandparent)</p>
                        <input type="text" id="member-name" name="member-name" required>
                    </div>

                    <!-- Relative of input family member (dynamic updates) -->
                    <div class="related-to-div">
                        <label for="related-to" class="related-to-name">Related to:</label>
                        <p class="instructions">Select which member the person is related to (locked person is first)</p>
                        <select id="related-to" name="related-to">
                        <!-- Options will be populated dynamically from the existing tree -->
                        </select>
                    </div>

                    <!-- Relationship type (Root, Parent, Spouse, Child, Sibling)-->
                    <div class="relationship-div">
                        <label for="relationship">Relationship:</label>
                        <p class="instructions">Select the relationship type for this member</p>
                        <select id="relationship" name="relationship">
                            <option value="root">Root</option>
                            <option value="parent">Parent</option>
                            <option value="spouse">Spouse</option>
                            <option value="child">Child</option>
                            <option value="sibling">Sibling</option>
                        </select>
                    </div>

                    <!-- Spouse checkbox -->
                    <div id="spouse-option-container" class="mt-4 hidden">
                        <label for="is-spouse" class="flex items-center">
                            <input type="checkbox" id="is-spouse" class="form-checkbox h-4 w-4 text-green-600 rounded">
                            <span class="ml-2 text-gray-700">This member is the spouse</span>
                        </label>
                    </div>
                    <button type="submit" class="add-member-btn" id="add-member-btn">Add Member</button>
                </form>
            </div>
            <!-- This is the new container for the family tree visualization -->
            <div id="family-tree-container">
            <!-- The family tree will be rendered here dynamically by JavaScript -->
            </div>
        </div>
        <!-- A custom modal for displaying messages to the user -->
        <div id="message-modal" class="modal">
            <div class="modal-content">
                <span class="close-button">&times;</span>
                <p id="modal-message"></p>
            </div>
        </div>
    </main>
    <!-- Footer -->
    <footer class="familytrees-footer">
        <div class="container-footer">
        <p>&copy; 2025 Family Tree Creator. All rights reserved.</p>
        </div>
    </footer>

    <script src="JS/script.js"></script>
</body>
</html>
